//CSS spinner 
(function($) {
$.fn.buttonLoader = function(action) {
    var self = $(this);
    //start loading animation
    //start button
    if (action == 'start') {
    if ($(self).attr("disabled") == "disabled") {
        e.preventDefault();
    }
    //disable buttons when loading state
    $('.has-spinner').attr("disabled", "disabled");
    $(self).attr('data-btn-text', $(self).text());
    //binding spinner element to button and changing button text
    $(self).html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>Starting...');
    $(self).addClass('active');
    }

    //stop button
    if (action == 'start-s') {
    if ($(self).attr("disabled") == "disabled") {
        e.preventDefault();
    }
    //disable buttons when loading state
    $('.has-spinner').attr("disabled", "disabled");
    $(self).attr('data-btn-text', $(self).text());
    //binding spinner element to button and changing button text
    $(self).html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>stopping...');
    $(self).addClass('active');
    }
    //continue button
    if (action == 'start-c') {
    if ($(self).attr("disabled") == "disabled") {
        e.preventDefault();
    }
    //disable buttons when loading state
    $('.has-spinner').attr("disabled", "disabled");
    $(self).attr('data-btn-text', $(self).text());
    //binding spinner element to button and changing button text
    $(self).html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>Continuing...');
    $(self).addClass('active');
    }
    //quit button
    if (action == 'start-q') {
    if ($(self).attr("disabled") == "disabled") {
        e.preventDefault();
    }
    //disable buttons when loading state
    $('.has-spinner').attr("disabled", "disabled");
    $(self).attr('data-btn-text', $(self).text());
    //binding spinner element to button and changing button text
    $(self).html('<span class="spinner"><i class="fa fa-spinner fa-spin"></i></span>Ending...');
    $(self).addClass('active');
    }
    
    //stop loading animation
    //start button
    if (action == 'stop') {
        $(self).html('<i class="fa fa-plug"></i>&nbsp;Run Lab');
        $(self).removeClass('active');
        //enable buttons after finish loading
        $('.has-spinner').removeAttr("disabled");
    }
    //quit button
    if (action == 'stop-q') {
        $(self).html('<i class="fa fa-power-off"></i>&nbsp;End');
        $(self).removeClass('active');
        //enable buttons after finish loading
        $('.has-spinner').removeAttr("disabled");
    }
}
})(jQuery);